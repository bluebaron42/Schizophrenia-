import React, { useState, useEffect } from 'react';
import { 
  ChevronRight, 
  ChevronLeft, 
  Activity, 
  Brain, 
  CheckCircle, 
  Menu, 
  X, 
  Play, 
  AlertTriangle, 
  Layers, 
  Clock, 
  Users, 
  User,
  BookOpen, 
  FileText, 
  Scale, 
  Maximize2, 
  Minimize2,
  Projector,
  Dna,
  Zap,
  Microscope,
  MessageCircle,
  Home,
  Pill,
  Syringe,
  ShieldAlert,
  Umbrella,
  CloudRain,
  Thermometer,
  ClipboardList
} from 'lucide-react';
import Slide from './components/Slide';
import PhaseHeader from './components/PhaseHeader';
import DoNowQuiz from './components/DoNowQuiz';
import CardDeck from './components/CardDeck';
import ClinicianSim from './components/ClinicianSim';
import SynapseBuilder from './components/SynapseBuilder';
import EssayPlanReveal from './components/EssayPlanReveal';
import StroopSim from './components/StroopSim';
import EssayPlanRevealL3 from './components/EssayPlanRevealL3';
import DrugMoleculeSim from './components/DrugMoleculeSim';
import SideEffectsDeckWrapper from './components/SideEffectsDeckWrapper';
import EssayPlanRevealL4 from './components/EssayPlanRevealL4';
import ExamSimulator from './components/ExamSimulator';
import StressBucketSim from './components/StressBucketSim';
import EssayPlanRevealL7 from './components/EssayPlanRevealL7';
import CausationDebate from './components/CausationDebate';
import PharoahStrategies from './components/PharoahStrategies';
import CBT_Model_View from './components/CBT_Model_View';
import CBT_TherapistSim from './components/CBT_TherapistSim';
import EssayPlanRevealL5 from './components/EssayPlanRevealL5';
import WardManagerSim from './components/WardManagerSim';
import ProtocolDesignChallenge from './components/ProtocolDesignChallenge';
import { lessons, lesson1DoNow, lesson2DoNow, lesson3DoNow, lesson4DoNow, lesson5DoNow, lesson6DoNow, lesson7DoNow, diagnosisCards } from './constants';

export default function App() {
  const [currentSlide, setCurrentSlide] = useState(0);
  const [currentLesson, setCurrentLesson] = useState(1); 
  const [isSidebarOpen, setSidebarOpen] = useState(true);
  const [isPresentation, setIsPresentation] = useState(false);
  const [activeEE, setActiveEE] = useState<string | null>(null);

  const getSlideCount = (lessonId: number) => {
    switch(lessonId) {
      case 1: return 13;
      case 2: return 11;
      case 3: return 11;
      case 4: return 12;
      case 5: return 7;
      case 6: return 5;
      case 7: return 10;
      default: return 1;
    }
  };

  const slideCount = getSlideCount(currentLesson);

  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') prevSlide();
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [currentSlide, slideCount]);

  const nextSlide = () => { if (currentSlide < slideCount - 1) setCurrentSlide(prev => prev + 1); };
  const prevSlide = () => { if (currentSlide > 0) setCurrentSlide(prev => prev - 1); };
  const togglePresentation = () => { if (!isPresentation) { setSidebarOpen(false); } setIsPresentation(!isPresentation); }

  const renderLesson1 = () => {
    switch (currentSlide) {
        case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><Brain size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 01: Classification & Diagnosis</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
        case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 1: Activation" title="Do Now Task" icon={Clock} time="10 MINS" isPresentation={isPresentation} /><DoNowQuiz questions={lesson1DoNow} isPresentation={isPresentation} /></Slide>);
        case 2: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Classification Systems" icon={BookOpen} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-[80%] ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`bg-gray-800 rounded-xl border-t-8 border-red-500 shadow-2xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-6xl' : 'text-4xl'}`}>DSM-5</h3><p className={`text-gray-300 ${isPresentation ? 'text-3xl leading-relaxed' : 'text-base'}`}>Requires at least <span className="text-white font-bold">ONE Positive Symptom</span>. No subtypes.</p></div><div className={`bg-gray-800 rounded-xl border-t-8 border-green-500 shadow-2xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-6xl' : 'text-4xl'}`}>ICD-10</h3><p className={`text-gray-300 ${isPresentation ? 'text-3xl leading-relaxed' : 'text-base'}`}>Diagnosis possible with <span className="text-white font-bold">TWO Negative Symptoms</span> alone. Subtypes recognized.</p></div></div></Slide>);
        case 3: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Positive Symptoms" icon={Activity} isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl overflow-y-auto ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-pink-400 mb-4 border-b border-gray-600 pb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Hallucinations</h3><p className={`text-gray-300 mb-4 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Unusual sensory experiences that have no basis in reality or are distorted perceptions of real things. They can affect any sense.</p><ul className={`space-y-3 ${isPresentation ? 'text-lg' : 'text-sm'}`}><li className={`bg-gray-900/50 rounded border-l-4 border-pink-500 ${isPresentation ? 'p-5' : 'p-3'}`}><strong className="text-pink-300 block">Auditory</strong><span className="text-gray-400">Most common. Hearing voices that may be critical ("You are useless"), commenting ("He is eating"), or commanding.</span></li><li className={`bg-gray-900/50 rounded border-l-4 border-pink-500 ${isPresentation ? 'p-5' : 'p-3'}`}><strong className="text-pink-300 block">Visual</strong><span className="text-gray-400">Seeing distorted facial expressions, or people/animals that are not there.</span></li><li className={`bg-gray-900/50 rounded border-l-4 border-pink-500 ${isPresentation ? 'p-5' : 'p-3'}`}><strong className="text-pink-300 block">Tactile/Olfactory</strong><span className="text-gray-400">Sensations of being touched (formication) or smelling smells others cannot.</span></li></ul></div><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl overflow-y-auto ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-purple-400 mb-4 border-b border-gray-600 pb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Delusions</h3><p className={`text-gray-300 mb-4 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Irrational beliefs (Paranoia) that have no basis in reality. The sufferer continues to hold them despite evidence to the contrary.</p><ul className={`space-y-3 ${isPresentation ? 'text-lg' : 'text-sm'}`}><li className={`bg-gray-900/50 rounded border-l-4 border-purple-500 ${isPresentation ? 'p-5' : 'p-3'}`}><strong className="text-purple-300 block">Delusions of Grandeur</strong><span className="text-gray-400">Belief that they are an important historical or religious figure (e.g., Jesus, Napoleon) or have superpowers.</span></li><li className={`bg-gray-900/50 rounded border-l-4 border-purple-500 ${isPresentation ? 'p-5' : 'p-3'}`}><strong className="text-purple-300 block">Delusions of Persecution</strong><span className="text-gray-400">Belief that they are being spied on, plotted against, or threatened by groups (e.g., MI5, Aliens, the Government).</span></li><li className={`bg-gray-900/50 rounded border-l-4 border-purple-500 ${isPresentation ? 'p-5' : 'p-3'}`}><strong className="text-purple-300 block">Delusions of Reference</strong><span className="text-gray-400">Believing that external events (TV news, songs) are communicating specific messages directly to them.</span></li></ul></div></div></Slide>);
        case 4: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Negative Symptoms" icon={Activity} isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl overflow-y-auto ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-blue-400 mb-4 border-b border-gray-600 pb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Avolition (Apathy)</h3><p className={`text-gray-300 mb-4 ${isPresentation ? 'text-xl' : 'text-sm'}`}>A severe loss of motivation to carry out distinct tasks. It results in lowered activity levels.</p><div className={`bg-gray-900 rounded-lg mb-4 ${isPresentation ? 'p-6' : 'p-4'}`}><strong className={`text-blue-300 block mb-2 uppercase ${isPresentation ? 'text-lg' : 'text-sm'}`}>Andreason (1982) Identified 3 Signs:</strong><ul className={`space-y-2 list-disc pl-4 text-gray-400 ${isPresentation ? 'text-xl' : 'text-sm'}`}><li><strong>Poor Hygiene:</strong> Failing to wash or change clothes regularly.</li><li><strong>Lack of Persistence:</strong> Starting tasks (education/work) but failing to finish them.</li><li><strong>Lack of Energy:</strong> Sitting for hours doing nothing.</li></ul></div><p className={`text-gray-500 italic ${isPresentation ? 'text-sm' : 'text-[10px]'}`}>Note: This is distinct from the psychomotor retardation seen in depression, though there is overlap.</p></div><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl overflow-y-auto ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-indigo-400 mb-4 border-b border-gray-600 pb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Speech Poverty (Alogia)</h3><p className={`text-gray-300 mb-4 ${isPresentation ? 'text-xl' : 'text-sm'}`}>A reduction in the amount and quality of speech. It reflects a slowing or blocking of thoughts.</p><div className="space-y-4"><div className={`bg-gray-900/50 rounded border-l-4 border-indigo-500 ${isPresentation ? 'p-6' : 'p-4'}`}><strong className={`text-indigo-300 block mb-1 ${isPresentation ? 'text-xl' : 'text-sm'}`}>ICD-10 Definition</strong><p className={`text-gray-400 ${isPresentation ? 'text-lg' : 'text-xs'}`}>Emphasizes reduction in the <strong>amount</strong> of speech. The patient answers with one word or not at all.</p></div><div className={`bg-gray-900/50 rounded border-l-4 border-indigo-500 ${isPresentation ? 'p-6' : 'p-4'}`}><strong className={`text-indigo-300 block mb-1 ${isPresentation ? 'text-xl' : 'text-sm'}`}>DSM-5 Emphasis</strong><p className={`text-gray-400 ${isPresentation ? 'text-lg' : 'text-xs'}`}>Often categorizes <strong>Speech Disorganization</strong> (word salad) as a positive symptom, while Speech Poverty (delay in verbal response) remains negative.</p></div></div></div></div></Slide>);
        case 5: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Issues in Diagnosis" icon={AlertTriangle} isPresentation={isPresentation} /><CardDeck cards={diagnosisCards} isPresentation={isPresentation} /></Slide>);
        case 6: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Check" title="Hinge Question" icon={Activity} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full"><p className={`font-serif text-white text-center max-w-3xl mb-12 ${isPresentation ? 'text-5xl leading-tight' : 'text-3xl'}`}>"If a patient presents with severe Avolition and Speech Poverty but NO hallucinations, which manual diagnoses them with Schizophrenia?"</p><div className="grid grid-cols-2 gap-8 w-full max-w-3xl"><button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-red-500 hover:bg-red-900/10 transition-all ${isPresentation ? 'p-12' : 'p-8'}`}><span className={`font-bold text-gray-200 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>DSM-5</span><span className={`block text-gray-500 mt-2 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Incorrect: Requires Positive Symptom</span></button><button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-green-500 hover:bg-green-900/10 transition-all ${isPresentation ? 'p-12' : 'p-8'}`}><span className={`font-bold text-gray-200 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>ICD-10</span><span className={`block text-gray-500 mt-2 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Correct: Accepts 2+ Negative Symptoms</span></button></div></div></Slide>);
        case 7: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice" title="Simulation Briefing" icon={Users} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full text-center max-w-2xl mx-auto"><div className={`rounded-full mb-8 animate-pulse bg-purple-900/20 ${isPresentation ? 'p-10' : 'p-6'}`}><FileText size={isPresentation ? 120 : 80} className="text-purple-400" /></div><h3 className={`font-bold text-white mb-6 ${isPresentation ? 'text-6xl' : 'text-4xl'}`}>The Clinician's Desk</h3><p className={`text-gray-300 mb-8 leading-relaxed ${isPresentation ? 'text-3xl' : 'text-xl'}`}>You will now be presented with <strong>4 Patient Vignettes</strong>. Extract symptoms and apply DSM-5 vs ICD-10 criteria.</p><button onClick={nextSlide} className={`bg-purple-600 text-white rounded-full font-bold hover:bg-purple-500 transition-all shadow-lg ${isPresentation ? 'px-14 py-6 text-2xl' : 'px-10 py-4 text-lg'}`}>Open Case Files</button></div></Slide>);
        case 8: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice (We Do)" title="The Clinician's Desk" icon={Users} isPresentation={isPresentation} /><ClinicianSim isPresentation={isPresentation} /></Slide>);
        case 9: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Independent Practice" title="8-Mark Application" icon={Layers} time="10 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><div className={`flex items-center gap-3 mb-6 border-b border-gray-600 pb-4`}><span className={`bg-orange-600 text-white font-bold rounded ${isPresentation ? 'px-4 py-2 text-xl' : 'px-3 py-1 text-sm'}`}>8 MARKS</span><h3 className={`font-bold text-gray-200 ${isPresentation ? 'text-3xl' : 'text-xl'}`}>Extended Application</h3></div><div className={`bg-black/30 rounded border-l-4 border-orange-500 mb-6 flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}><h4 className={`text-orange-400 font-bold uppercase mb-3 tracking-widest ${isPresentation ? 'text-lg' : 'text-xs'}`}>Scenario</h4><p className={`text-gray-300 leading-relaxed italic ${isPresentation ? 'text-2xl' : 'text-lg'}`}>"Stefan has recently been diagnosed with Schizophrenia... two different doctors have assessed him..."</p></div><p className={`text-white font-semibold leading-snug ${isPresentation ? 'text-3xl' : 'text-xl'}`}>Discuss reliability and validity referring to Stefan.</p></div><div className={`bg-gray-800/50 rounded-xl border border-gray-700 shadow-xl flex flex-col justify-center ${isPresentation ? 'p-12' : 'p-8'}`}><h3 className={`text-gray-400 font-bold uppercase tracking-widest mb-6 text-center ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Answer Planning</h3><div className={`space-y-6 ${isPresentation ? 'text-2xl' : 'text-base'}`}><div className="flex gap-4 items-start"><div className={`rounded-full bg-blue-600 flex items-center justify-center font-bold text-blue-300 shrink-0 border border-blue-500 ${isPresentation ? 'w-12 h-12' : 'w-8 h-8'}`}>1</div><strong className="text-blue-300">AO1: Definitions</strong></div><div className="flex gap-4 items-start"><div className={`rounded-full bg-green-600 flex items-center justify-center font-bold text-white shrink-0 ${isPresentation ? 'w-12 h-12' : 'w-8 h-8'}`}>2</div><strong className="text-green-300">AO2: Application (Stefan)</strong></div><div className="flex gap-4 items-start"><div className={`rounded-full bg-red-600 flex items-center justify-center font-bold text-white shrink-0 ${isPresentation ? 'w-12 h-12' : 'w-8 h-8'}`}>3</div><strong className="text-red-300">AO3: Eval (Cheniaux/Buckley)</strong></div></div></div></div></Slide>);
        case 10: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Feedback" title="Self-Marking Rubric" icon={Scale} isPresentation={isPresentation} /><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-10' : 'p-6'}`}><p className={`text-gray-300 ${isPresentation ? 'text-3xl' : 'text-base'}`}>Level 4 (7-8 Marks): Thorough knowledge, effective application to Stefan, detailed evaluation.</p><div className="flex justify-center mt-8"><button onClick={nextSlide} className={`bg-purple-600 text-white rounded-full font-bold ${isPresentation ? 'px-12 py-5 text-2xl' : 'px-8 py-3'}`}>Model Answer</button></div></div></Slide>);
        case 11: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Feedback" title="Model Answer" icon={CheckCircle} isPresentation={isPresentation} /><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl h-full overflow-y-auto ${isPresentation ? 'p-10' : 'p-8'}`}><p className={`text-gray-300 font-serif ${isPresentation ? 'text-2xl leading-loose' : 'text-lg'}`}><span className="text-blue-300">Reliability refers to consistency...</span> <span className="text-green-300">In Stefan's case...</span> <span className="text-red-300">This supports findings by Cheniaux et al...</span></p></div></Slide>);
        case 12: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-10' : 'p-6'}`}><CheckCircle size={isPresentation ? 120 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-6xl' : 'text-4xl'}`}>Lesson 01 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-3xl' : 'text-xl'}`}>Classification, Symptoms, Reliability & Validity covered.</p><button className={`bg-gray-800 border border-gray-600 rounded text-gray-300 ${isPresentation ? 'px-10 py-5 text-2xl' : 'px-6 py-3'}`} onClick={() => { setCurrentLesson(2); setCurrentSlide(0); }}>Proceed to Lesson 2</button></div></Slide>);
        default: return null;
    }
  };

  const renderLesson2 = () => {
    switch (currentSlide) {
      case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><Dna size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 02: Biological Explanations</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
      case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 1: Activation" title="Do Now Task" icon={Clock} time="10 MINS" isPresentation={isPresentation} /><DoNowQuiz questions={lesson2DoNow} isPresentation={isPresentation} /></Slide>);
      case 2: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Genetic Basis" icon={Dna} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className="flex flex-col gap-4"><div className={`bg-gray-800 rounded-xl border-t-8 border-blue-500 shadow-xl flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Family Studies</h3><div className={`bg-gray-900/50 rounded-lg ${isPresentation ? 'space-y-6 p-6' : 'space-y-3 p-4'}`}><div className={`flex justify-between items-center bg-gray-800 rounded border border-gray-700 ${isPresentation ? 'p-6' : 'p-3'}`}><span className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>General Pop</span><span className={`font-bold text-gray-500 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>1%</span></div><div className={`flex justify-between items-center bg-gray-800 rounded border border-gray-700 ${isPresentation ? 'p-6' : 'p-3'}`}><span className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Siblings</span><span className={`font-bold text-blue-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>9%</span></div><div className={`flex justify-between items-center bg-gray-800 rounded border border-gray-700 ${isPresentation ? 'p-6' : 'p-3'}`}><span className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>DZ Twins</span><span className={`font-bold text-blue-400 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>17%</span></div><div className={`flex justify-between items-center bg-purple-900/30 rounded border border-purple-500 ${isPresentation ? 'p-6' : 'p-3'}`}><span className={`text-white font-bold ${isPresentation ? 'text-2xl' : 'text-sm'}`}>MZ Twins (Identical)</span><span className={`font-bold text-purple-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>48%</span></div></div></div><div className={`bg-red-900/10 rounded-xl border-l-4 border-red-500 flex-grow ${isPresentation ? 'p-10' : 'p-5'}`}><strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Nature vs Nurture</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Shared Environment Issue:</strong> MZ twins share 100% of genes but also a more similar environment than DZ twins. High concordance rates could be due to similar upbringing (Nurture), not just genes (Nature). This reduces validity of twin studies.</p></div></div><div className="flex flex-col gap-4"><div className={`bg-gray-800 rounded-xl border-t-8 border-purple-500 shadow-xl flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Candidate Genes</h3><div className={`bg-purple-900/10 rounded-lg border-l-4 border-purple-500 mb-4 ${isPresentation ? 'p-8' : 'p-4'}`}><p className={`text-purple-200 font-bold mb-2 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>Ripke et al. (2014)</p><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}>Genome-wide study of <span className="text-white">37,000 patients</span>. Found <span className="text-white font-bold">108 genetic variations</span> (loci) associated with increased risk.</p></div><div className={`grid grid-cols-2 gap-3 mb-2 ${isPresentation ? 'text-xl' : 'text-sm'}`}><div className={`bg-gray-900 rounded border border-gray-700 text-center ${isPresentation ? 'p-6' : 'p-3'}`}><strong className="text-white block mb-1">Polygenic</strong><span className="text-gray-400 text-xs">Schizophrenia is caused by a combination of MANY genes, not a single 'schizogene'.</span></div><div className={`bg-gray-900 rounded border border-gray-700 text-center ${isPresentation ? 'p-6' : 'p-3'}`}><strong className="text-white block mb-1">Aetiologically Heterogeneous</strong><span className="text-gray-400 text-xs">Different combinations of genes can lead to the same disorder.</span></div></div></div><div className={`bg-red-900/10 rounded-xl border-l-4 border-red-500 flex-grow ${isPresentation ? 'p-10' : 'p-5'}`}><strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Adoption Support</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Tienari et al. (2004)</strong> found that children of schizophrenia sufferers are still at heightened risk even if adopted into healthy families. This supports the genetic explanation as it isolates genetic risk from environmental influence.</p></div></div></div></Slide>);
      case 3: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="The Dopamine Hypothesis" icon={Zap} isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl overflow-hidden border border-gray-700 flex flex-col`}><div className={`bg-gray-900 border-b border-gray-700 ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-pink-400 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>1. Hyperdopaminergia</h3><p className={`font-bold text-gray-500 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>THE ORIGINAL THEORY</p></div><div className={`flex-grow ${isPresentation ? 'p-10 space-y-10' : 'p-8 space-y-6'}`}><div className={`flex items-center gap-4`}><div className={`rounded-full bg-pink-500/20 border border-pink-500 flex items-center justify-center text-pink-400 font-bold ${isPresentation ? 'w-20 h-20 text-4xl' : 'w-12 h-12 text-xl'}`}>↑</div><p className={`text-gray-300 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>High dopamine activity in the <strong className="text-white">Subcortex</strong> (Central areas).</p></div><div className={`space-y-4 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><div className={`bg-gray-900/50 rounded border-l-4 border-pink-500 ${isPresentation ? 'p-8' : 'p-4'}`}><strong className="text-pink-300 block mb-1">Broca's Area</strong><span className="text-gray-400">Excess dopamine here causes poverty of speech and/or auditory hallucinations.</span></div><div className={`bg-gray-900/50 rounded border-l-4 border-pink-500 ${isPresentation ? 'p-8' : 'p-4'}`}><strong className="text-pink-300 block mb-1">D2 Receptors</strong><span className="text-gray-400">Schizophrenics have a higher density of D2 receptors, making them supersensitive to dopamine.</span></div></div></div></div><div className={`bg-gray-800 rounded-xl overflow-hidden border border-gray-700 flex flex-col`}><div className={`bg-gray-900 border-b border-gray-700 ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-blue-400 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>2. Hypodopaminergia</h3><p className={`font-bold text-gray-500 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>THE REVISED THEORY</p></div><div className={`flex-grow ${isPresentation ? 'p-10 space-y-10' : 'p-8 space-y-6'}`}><div className={`flex items-center gap-4`}><div className={`rounded-full bg-blue-500/20 border border-blue-500 flex items-center justify-center text-blue-400 font-bold ${isPresentation ? 'w-20 h-20 text-4xl' : 'w-12 h-12 text-xl'}`}>↓</div><p className={`text-gray-300 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>Low dopamine activity in the <strong className="text-white">Cortex</strong> (Outer areas).</p></div><div className={`space-y-4 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><div className={`bg-gray-900/50 rounded border-l-4 border-blue-500 ${isPresentation ? 'p-8' : 'p-4'}`}><strong className="text-blue-300 block mb-1">Goldman-Rakic</strong><span className="text-gray-400">Identified low levels in the <strong>Prefrontal Cortex</strong> (responsible for thinking & decision making).</span></div><div className={`bg-gray-900/50 rounded border-l-4 border-blue-500 ${isPresentation ? 'p-8' : 'p-4'}`}><strong className="text-blue-300 block mb-1">Negative Symptoms</strong><span className="text-gray-400">This explains symptoms like <strong>Avolition</strong>. Note: Low cortical dopamine may CAUSE high subcortical dopamine.</span></div></div></div></div></div></Slide>);
      case 4: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Neural Correlates" icon={Microscope} isPresentation={isPresentation} /><div className={`flex flex-col h-full ${isPresentation ? 'gap-8' : 'gap-4'}`}><div className={`grid grid-cols-2 flex-grow ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-purple-300 mb-2 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Ventral Striatum</h3><p className={`text-gray-500 font-bold uppercase mb-4 ${isPresentation ? 'text-lg' : 'text-[10px]'}`}>CORRELATION: NEGATIVE SYMPTOMS</p><div className={`bg-black/40 rounded-lg border-l-4 border-purple-500 flex-grow ${isPresentation ? 'p-8' : 'p-5'}`}><strong className={`text-purple-400 block mb-2 ${isPresentation ? 'text-2xl' : 'text-lg'}`}>Juckel et al. (2006)</strong><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Procedure:</strong> Measured activity levels in the Ventral Striatum (involved in anticipation of reward) in schizophrenics vs controls.</p><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Findings:</strong> Found a strong <strong>negative correlation</strong>. Lower activity levels were associated with increased severity of overall negative symptoms (specifically Avolition). Motivation is reduced.</p></div></div><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-pink-300 mb-2 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Superior Temporal Gyrus</h3><p className={`text-gray-500 font-bold uppercase mb-4 ${isPresentation ? 'text-lg' : 'text-[10px]'}`}>CORRELATION: POSITIVE SYMPTOMS</p><div className={`bg-black/40 rounded-lg border-l-4 border-pink-500 flex-grow ${isPresentation ? 'p-8' : 'p-5'}`}><strong className={`text-pink-400 block mb-2 ${isPresentation ? 'text-2xl' : 'text-lg'}`}>Allen et al. (2007)</strong><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Procedure:</strong> Scanned patients experiencing auditory hallucinations while listening to pre-recorded speech vs their own voice.</p><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Findings:</strong> Found <strong>lower activation levels</strong> in the Superior Temporal Gyrus and Anterior Cingulate Gyrus. Patients made more errors distinguishing their own voice from others.</p></div></div></div><div className={`bg-red-900/10 rounded-xl border-l-4 border-red-500 ${isPresentation ? 'p-10' : 'p-6'}`}><h4 className={`text-red-400 font-bold uppercase tracking-widest mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Evaluation of Neural Correlates</h4><div className={`grid grid-cols-2 ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`text-gray-300 ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong className="text-red-300 block mb-1">1. The Causation Problem</strong><p className="leading-relaxed">Correlation does not mean causation. Does unusual brain activity cause the symptom, or does the symptom cause the activity? (e.g., does low striatum activity cause avolition, or does less information pass through <em>because</em> the person has withdrawn?). Direction of effect is unknown.</p></div><div className={`text-gray-300 ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong className="text-red-300 block mb-1">2. Third Variable Problem</strong><p className="leading-relaxed">Environmental factors (like stress or substance abuse) could cause both the brain changes AND the symptoms. Therefore, the neural correlate might not be the direct cause of the disorder, but a side effect of a third variable.</p></div></div></div></div></Slide>);
      case 5: return (
        <Slide isPresentation={isPresentation}>
          <PhaseHeader phase="Phase 2: Check" title="Hinge Question" icon={Activity} isPresentation={isPresentation} />
          <div className="flex flex-col items-center justify-center h-full">
            <p className={`font-serif text-white text-center mb-12 ${isPresentation ? 'text-6xl leading-tight max-w-5xl' : 'text-3xl max-w-3xl'}`}>
              "According to Goldman-Rakic (Revised Dopamine Hypothesis), what causes Negative Symptoms like Avolition?"
            </p>
            <div className={`grid grid-cols-2 gap-8 w-full ${isPresentation ? 'max-w-6xl' : 'max-w-3xl'}`}>
              <button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-red-500 hover:bg-red-900/10 transition-all text-left ${isPresentation ? 'p-10' : 'p-8'}`}>
                <span className={`font-bold text-gray-200 block mb-2 break-words ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Hyperdopaminergia</span>
                <span className={`block text-gray-500 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>High dopamine in Subcortex (Broca's). Linked to Positive Symptoms.</span>
              </button>
              <button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-green-500 hover:bg-green-900/10 transition-all text-left group ${isPresentation ? 'p-10' : 'p-8'}`}>
                <span className={`font-bold text-gray-200 block mb-2 break-words ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Hypodopaminergia</span>
                <span className={`block text-gray-500 mb-2 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Low dopamine in Prefrontal Cortex.</span>
                <span className={`block font-bold opacity-0 group-hover:opacity-100 transition-opacity text-green-400 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>CORRECT</span>
              </button>
            </div>
          </div>
        </Slide>
      );
      case 6: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice" title="Simulation Briefing" icon={Zap} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full text-center max-w-2xl mx-auto"><div className={`rounded-full mb-8 animate-pulse bg-purple-900/20 ${isPresentation ? 'p-12' : 'p-6'}`}><Activity size={isPresentation ? 150 : 80} className="text-purple-400" /></div><h3 className={`font-bold text-white mb-6 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>The Synapse Builder</h3><p className={`text-gray-300 mb-8 leading-relaxed ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You will now manipulate the biochemistry of a virtual brain. <br/><br/>Adjust <strong>Dopamine Levels</strong> in different brain regions to see if you can trigger specific Positive or Negative symptoms based on the theories we just covered.</p><button onClick={nextSlide} className={`bg-purple-600 text-white rounded-full font-bold hover:bg-purple-500 transition-all shadow-lg ${isPresentation ? 'px-16 py-8 text-3xl' : 'px-10 py-4 text-lg'}`}>Enter Lab</button></div></Slide>);
      case 7: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice (We Do)" title="The Synapse Builder" icon={Zap} isPresentation={isPresentation} /><SynapseBuilder isPresentation={isPresentation} /></Slide>);
      case 8: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Independent Practice" title="Essay Planning" icon={Layers} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><div className={`flex items-center gap-3 mb-6 border-b border-gray-600 pb-4`}><span className={`bg-purple-600 text-white font-bold rounded ${isPresentation ? 'px-5 py-3 text-2xl' : 'px-3 py-1 text-sm'}`}>16 MARKS</span><h3 className={`font-bold text-gray-200 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Essay Question</h3></div><p className={`text-white font-semibold leading-snug mb-6 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>"Describe and evaluate the biological explanation for schizophrenia."</p><div className={`bg-black/30 rounded border-l-4 border-purple-500 mb-6 flex-grow ${isPresentation ? 'p-10' : 'p-4'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest ${isPresentation ? 'text-lg' : 'text-xs'}`}>Guidance</h4><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>6 marks AO1 (Description), 10 marks AO3 (Evaluation).</p></div></div><EssayPlanReveal isPresentation={isPresentation} /></div></Slide>);
      case 9: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Feedback" title="Official Mark Scheme" icon={Scale} isPresentation={isPresentation} /><div className="h-full overflow-y-auto custom-scrollbar pr-4"><table className="w-full text-left border-collapse border border-gray-700"><thead className="bg-gray-800 text-gray-400 uppercase text-xs sticky top-0"><tr><th className={`border-b border-gray-700 bg-gray-800 ${isPresentation ? 'p-8 text-2xl w-48' : 'p-4 w-32'}`}>Band</th><th className={`border-b border-gray-700 bg-gray-800 ${isPresentation ? 'p-8 text-2xl' : 'p-4'}`}>Description</th></tr></thead><tbody className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><tr className="border-b border-gray-700 bg-green-900/10"><td className={`align-top font-bold text-green-400 ${isPresentation ? 'p-8' : 'p-4'}`}>Top (13-16)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Knowledge is accurate and detailed (e.g., specific brain areas/gene numbers). Evaluation is thorough and effective. Minor errors only.</td></tr><tr className="border-b border-gray-700"><td className={`align-top font-bold text-yellow-400 ${isPresentation ? 'p-8' : 'p-4'}`}>Mid (9-12)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Knowledge is evident but less detailed. Evaluation is present but may be generic (e.g., "it is reductionist" without explaining why).</td></tr></tbody></table></div></Slide>);
      case 10: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-12' : 'p-6'}`}><CheckCircle size={isPresentation ? 150 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>Lesson 02 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You have analyzed the Genetic basis and Dopamine Hypothesis.</p><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-12' : 'p-6'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest mb-2 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>Next Lesson</h4><div className="flex items-center justify-between"><span className={`font-bold text-white ${isPresentation ? 'text-4xl' : 'text-xl'}`}>03: Psychological Explanations</span><ChevronRight className="text-gray-500" /></div></div></div></Slide>);
      default: return null;
    }
  };

  const renderLesson3 = () => {
    switch (currentSlide) {
      case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><MessageCircle size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 03: Psychological Explanations</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
      case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 1: Activation" title="Do Now Task" icon={Clock} time="10 MINS" isPresentation={isPresentation} /><DoNowQuiz questions={lesson3DoNow} isPresentation={isPresentation} /></Slide>);
      case 2: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Family Dysfunction" icon={Home} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-blue-500 flex flex-col overflow-hidden ${isPresentation ? 'text-lg' : 'text-base'}`}><div className={`bg-gray-800 border-b border-gray-700 flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Schizophrenogenic Mother</h3><p className={`font-bold text-blue-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Fromm-Reichmann (1948)</p><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}>A psychodynamic explanation. The mother is <strong>Cold</strong>, <strong>Rejecting</strong>, and <strong>Controlling</strong>. This creates a family climate of tension and secrecy.</p><strong className={`text-white block ${isPresentation ? 'text-lg' : 'text-xs'}`}>Mechanism:</strong><p className={`text-gray-400 ${isPresentation ? 'text-lg' : 'text-xs'}`}>Leads to distrust &#8594; Paranoid Delusions.</p></div><div className={`bg-blue-900/10 border-t border-gray-700 ${isPresentation ? 'p-10' : 'p-6'}`}><strong className={`text-blue-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Evaluation</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Social Sensitivity:</strong> Implies parents are responsible ("Parent-blaming"). Relies on retrospective accounts which may be distorted.</p></div></div><div className={`bg-gray-800 rounded-xl border border-purple-500 flex flex-col overflow-hidden ${isPresentation ? 'text-lg' : 'text-base'}`}><div className={`bg-gray-800 border-b border-gray-700 flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Double Bind Theory</h3><p className={`font-bold text-purple-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Bateson et al. (1956)</p><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Children receive contradictory messages (e.g. Verbal affection vs Non-verbal recoil). They are trapped and cannot express confusion.</p><strong className={`text-white block ${isPresentation ? 'text-lg' : 'text-xs'}`}>Mechanism:</strong><p className={`text-gray-400 ${isPresentation ? 'text-lg' : 'text-xs'}`}>World becomes confusing/dangerous &#8594; Disorganized Thinking.</p></div><div className={`bg-purple-900/10 border-t border-gray-700 ${isPresentation ? 'p-10' : 'p-6'}`}><strong className={`text-purple-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Evaluation</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Evidence:</strong> Berger (1965) found schizophrenics recalled more double binds. However, Hall (1980) found no difference between families.</p></div></div></div></Slide>);
      case 3: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Expressed Emotion (EE)" icon={Activity} isPresentation={isPresentation} /><div className={`flex flex-col h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border-t-8 border-yellow-500 shadow-xl flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-5xl' : 'text-3xl'}`}>Expressed Emotion (EE)</h3><p className={`text-gray-300 mb-6 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>The level of (negative) emotion expressed towards a patient by their carers. Primarily an explanation for <strong>RELAPSE</strong> (Re-hospitalization).</p><div className="grid grid-cols-3 gap-4 mb-6"><button onClick={() => setActiveEE('criticism')} className={`rounded border text-center transition-all ${isPresentation ? 'p-8 text-xl' : 'p-4 text-base'} ${activeEE === 'criticism' ? 'bg-yellow-500 text-black border-yellow-500' : 'bg-gray-900 border-gray-700 text-gray-400 hover:border-yellow-500'}`}><strong className={`block mb-1 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>1. Verbal Criticism</strong><span className={isPresentation ? 'text-lg' : 'text-xs'}>Click for Example</span></button><button onClick={() => setActiveEE('hostility')} className={`rounded border text-center transition-all ${isPresentation ? 'p-8 text-xl' : 'p-4 text-base'} ${activeEE === 'hostility' ? 'bg-orange-500 text-white border-orange-500' : 'bg-gray-900 border-gray-700 text-gray-400 hover:border-orange-500'}`}><strong className={`block mb-1 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>2. Hostility</strong><span className={isPresentation ? 'text-lg' : 'text-xs'}>Click for Example</span></button><button onClick={() => setActiveEE('over')} className={`rounded border text-center transition-all ${isPresentation ? 'p-8 text-xl' : 'p-4 text-base'} ${activeEE === 'over' ? 'bg-red-500 text-white border-red-500' : 'bg-gray-900 border-gray-700 text-gray-400 hover:border-red-500'}`}><strong className={`block mb-1 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>3. Over-Involvement</strong><span className={isPresentation ? 'text-lg' : 'text-xs'}>Click for Example</span></button></div>{activeEE && (<div className={`bg-black/40 rounded border-l-4 border-yellow-500 animate-fadeIn mb-6 ${isPresentation ? 'p-8' : 'p-4'}`}><strong className={`text-yellow-400 block mb-1 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>Real-World Application</strong><p className={`text-white italic ${isPresentation ? 'text-3xl' : 'text-lg'}`}>"{activeEE === 'criticism' ? "You are useless, you don't even try to get out of bed." : activeEE === 'hostility' ? "I can't stand looking at you anymore, you make me sick." : "I sacrificed my whole life for you, I do everything for you."}"</p></div>)}<div className={`bg-gray-900 rounded-lg border border-gray-700 ${isPresentation ? 'p-10' : 'p-5'}`}><strong className={`text-white block mb-2 ${isPresentation ? 'text-3xl' : 'text-lg'}`}>Mechanism: The Diathesis-Stress Model</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>High EE is a source of profound <strong>stress</strong>. For a patient who already has a genetic vulnerability (the <strong>Diathesis</strong>), this environmental stress triggers the onset of the illness. Without this stress trigger, the gene might not express itself.</p></div></div><div className={`bg-red-900/10 rounded-xl border-l-4 border-red-500 ${isPresentation ? 'p-10' : 'p-5'}`}><strong className={`text-red-300 block mb-1 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Research Support</strong><p className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><strong>Linszen et al. (1997)</strong> found that a patient returning to a family with High EE is <strong>4 times more likely to relapse</strong> than one returning to a Low EE family.</p></div></div></Slide>);
      case 4: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Cognitive Explanations" icon={Brain} isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border-t-8 border-green-500 flex flex-col overflow-hidden`}>
        <div className={`flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}>
          <h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>1. Metarepresentation</h3>
          <p className={`font-bold text-green-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Frith et al. (1992)</p>
          <p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}>The cognitive ability to reflect on thoughts and behaviour. Allows us to distinguish between our own intentions and the actions of others.</p>
          <div className={`bg-green-900/10 rounded border border-green-500/30 ${isPresentation ? 'p-6' : 'p-3'}`}>
            <strong className={`text-green-300 block mb-1 uppercase ${isPresentation ? 'text-lg' : 'text-xs'}`}>Dysfunction Link</strong>
            <p className={`text-gray-300 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Failure to recognize own thoughts = <strong>Auditory Hallucinations</strong> (hearing internal voice as external).</p>
          </div>
        </div>
      </div><div className={`bg-gray-800 rounded-xl border-t-8 border-blue-500 flex flex-col overflow-hidden`}>
        <div className={`flex-grow ${isPresentation ? 'p-10' : 'p-6'}`}>
          <h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>2. Central Control</h3>
          <p className={`font-bold text-blue-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Frith et al. (1992)</p>
          <p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}>The ability to suppress automatic responses while performing deliberate actions.</p>
          <div className={`bg-blue-900/10 rounded border border-blue-500/30 ${isPresentation ? 'p-6' : 'p-3'}`}>
            <strong className={`text-blue-300 block mb-1 uppercase ${isPresentation ? 'text-lg' : 'text-xs'}`}>Dysfunction Link</strong>
            <p className={`text-gray-300 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Inability to suppress automatic associations = <strong>Disorganized Speech</strong> (Derailment/Word Salad).</p>
          </div>
        </div>
      </div><div className={`col-span-2 bg-red-900/10 rounded-xl border-l-4 border-red-500 ${isPresentation ? 'p-10 mt-6' : 'p-5 mt-2'}`}><strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>AO3: Supporting Evidence</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Stirling et al. (2006)</strong> compared 30 schizophrenics with 18 controls on the <strong>Stroop Test</strong> (naming ink colors). Schizophrenics took <strong>twice as long</strong> to name the colors, proving they struggled to suppress the automatic impulse to read the word (Central Control failure).</p></div></div></Slide>);
      case 5: return (
        <Slide isPresentation={isPresentation}>
          <PhaseHeader phase="Phase 2: Check" title="Hinge Question" icon={Activity} isPresentation={isPresentation} />
          <div className="flex flex-col items-center justify-center h-full">
            <p className={`font-serif text-white text-center mb-12 ${isPresentation ? 'text-6xl leading-tight max-w-5xl' : 'text-3xl max-w-3xl'}`}>
              "Which theory explains auditory hallucinations as a failure to recognize one's own inner voice?"
            </p>
            <div className={`grid grid-cols-2 gap-8 w-full ${isPresentation ? 'max-w-6xl' : 'max-w-3xl'}`}>
              <button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-red-500 hover:bg-red-900/10 transition-all text-left ${isPresentation ? 'p-10' : 'p-8'}`}>
                <span className={`font-bold text-gray-200 block mb-2 break-words ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Central Control</span>
                <span className={`block text-gray-500 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Focuses on suppressing automatic responses (Speech).</span>
              </button>
              <button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-green-500 hover:bg-green-900/10 transition-all text-left group ${isPresentation ? 'p-10' : 'p-8'}`}>
                <span className={`font-bold text-gray-200 block mb-2 break-words ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Metarepresentation</span>
                <span className={`block text-gray-500 mb-2 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>The ability to reflect on thoughts as one's own.</span>
                <span className={`block font-bold opacity-0 group-hover:opacity-100 transition-opacity text-green-400 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>CORRECT</span>
              </button>
            </div>
          </div>
        </Slide>
      );
      case 6: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice" title="Simulation Briefing" icon={Brain} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full text-center max-w-2xl mx-auto"><div className={`rounded-full mb-8 animate-pulse bg-purple-900/20 ${isPresentation ? 'p-12' : 'p-6'}`}><Zap size={isPresentation ? 150 : 80} className="text-purple-400" /></div><h3 className={`font-bold text-white mb-6 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>The Cognitive Filter</h3><p className={`text-gray-300 mb-8 leading-relaxed ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You will now experience <strong>Central Control Dysfunction</strong>.<br/><br/>You will take a standard psychological test used by Stirling et al. (2006). Can you suppress your automatic responses?</p><button onClick={nextSlide} className={`bg-purple-600 text-white rounded-full font-bold hover:bg-purple-500 transition-all shadow-lg ${isPresentation ? 'px-16 py-8 text-3xl' : 'px-10 py-4 text-lg'}`}>Enter Lab</button></div></Slide>);
      case 7: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice (We Do)" title="Simulation: Central Control" icon={Zap} isPresentation={isPresentation} /><StroopSim isPresentation={isPresentation} /></Slide>);
      case 8: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Independent Practice" title="Essay Planning" icon={Layers} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><div className={`flex items-center gap-3 mb-6 border-b border-gray-600 pb-4`}><span className={`bg-purple-600 text-white font-bold rounded ${isPresentation ? 'px-4 py-2 text-xl' : 'px-3 py-1 text-sm'}`}>16 MARKS</span><h3 className={`font-bold text-gray-200 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Essay Question</h3></div><p className={`text-white font-semibold leading-snug mb-6 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>"Discuss psychological explanations for schizophrenia."</p><div className={`bg-black/30 p-4 rounded border-l-4 border-purple-500 mb-6 flex-grow ${isPresentation ? 'p-10' : 'p-4'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest ${isPresentation ? 'text-xl' : 'text-xs'}`}>Guidance</h4><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>6 marks AO1 (Description), 10 marks AO3 (Evaluation). You can discuss Family Dysfunction, Cognitive Explanations, or both.</p></div></div><EssayPlanRevealL3 isPresentation={isPresentation} /></div></Slide>);
      case 9: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Feedback" title="Official Mark Scheme" icon={Scale} isPresentation={isPresentation} /><div className="h-full overflow-y-auto custom-scrollbar pr-4"><table className="w-full text-left border-collapse border border-gray-700"><thead className="bg-gray-800 text-gray-400 uppercase text-xs sticky top-0"><tr><th className={`border-b border-gray-700 bg-gray-800 ${isPresentation ? 'p-8 text-2xl w-48' : 'p-4 w-32'}`}>Level</th><th className={`border-b border-gray-700 bg-gray-800 w-1/2 ${isPresentation ? 'p-8 text-2xl' : 'p-4'}`}>AO1: Knowledge</th><th className={`border-b border-gray-700 bg-gray-800 w-1/2 ${isPresentation ? 'p-8 text-2xl' : 'p-4'}`}>AO3: Evaluation</th></tr></thead><tbody className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><tr className="border-b border-gray-700 bg-green-900/10"><td className={`align-top text-green-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 4 (13-16)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Detailed knowledge of Psych explanations (Family Dysfunction/Cognitive). Correct terminology (Metarepresentation, Central Control).</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Effective discussion of issues (Causality, Social Sensitivity). Effective use of evidence (Stirling/Linszen).</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-yellow-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 3 (9-12)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Evident knowledge but less detailed. May focus heavily on one area.</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Evaluation present but generic. Lacks depth on causality issues.</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-orange-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 2 (5-8)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Limited knowledge. May confuse theories (e.g. Double Bind vs EE).</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Basic evaluation (e.g. "It blames parents").</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-red-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 1 (1-4)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Very limited knowledge. Major inaccuracies.</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Evaluation absent or wholly ineffective.</td></tr></tbody></table></div></Slide>);
      case 10: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-12' : 'p-6'}`}><CheckCircle size={isPresentation ? 150 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>Lesson 03 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You have analyzed Family Dysfunction and Cognitive Explanations.</p><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-12' : 'p-6'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest mb-2 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>Next Lesson</h4><div className="flex items-center justify-between"><button onClick={() => { setCurrentLesson(4); setCurrentSlide(0); }} className={`bg-gray-800 border border-gray-600 rounded text-gray-300 hover:text-white flex items-center gap-2 ${isPresentation ? 'px-10 py-5 text-2xl' : 'px-6 py-3'}`}><span className={`font-bold text-white ${isPresentation ? 'text-4xl' : 'text-xl'}`}>04: Drug Therapies</span><ChevronRight className="text-gray-500" /></button></div></div></div></Slide>);
      default: return null;
    }
  };

  const renderLesson4 = () => {
    switch (currentSlide) {
      case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><Pill size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 04: Drug Therapies</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
      case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 1: Activation" title="Do Now Task" icon={Clock} time="10 MINS" isPresentation={isPresentation} /><DoNowQuiz questions={lesson4DoNow} isPresentation={isPresentation} /></Slide>);
      case 2: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Biological Therapy: The Basics" icon={Pill} time="10 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-3 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 flex flex-col ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-3xl' : 'text-xl'}`}>1. Antipsychotics</h3><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>The most common treatment for schizophrenia. They work by modifying neurotransmitter activity in the brain to reduce symptoms (mainly positive ones).</p></div><div className={`bg-gray-800 rounded-xl border border-gray-700 flex flex-col ${isPresentation ? 'p-10' : 'p-6'}`}><h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-3xl' : 'text-xl'}`}>2. Administration</h3><ul className={`list-disc pl-4 text-gray-300 space-y-2 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><li><strong>Tablets:</strong> Daily oral dosage.</li><li><strong>Syrup:</strong> For patients who struggle to swallow.</li><li><strong>Injections:</strong> Acute or Depot.</li></ul></div><div className={`bg-purple-900/20 rounded-xl border border-purple-500 flex flex-col ${isPresentation ? 'p-10' : 'p-6'}`}><div className="flex items-center gap-2 mb-4"><Syringe className="text-purple-400" size={isPresentation ? 48 : 24} /><h3 className={`font-bold text-white ${isPresentation ? 'text-3xl' : 'text-xl'}`}>3. Depot Injections</h3></div><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Given every 2–4 weeks. Crucial for patients who struggle with adherence (e.g. due to Avolition or forgetfulness). Ensures consistent medication levels.</p></div><div className={`col-span-3 bg-gray-900 rounded-lg border border-gray-700 ${isPresentation ? 'p-8' : 'p-6'}`}><strong className={`text-white block mb-2 ${isPresentation ? 'text-3xl' : 'text-sm'}`}>Classification Timeline</strong><div className="flex gap-4"><span className={`bg-blue-900/50 text-blue-300 rounded border border-blue-500/50 font-bold ${isPresentation ? 'px-6 py-4 text-xl' : 'px-4 py-2 text-xs'}`}>1950s: Typical (1st Gen)</span><span className={`bg-green-900/50 text-green-300 rounded border border-green-500/50 font-bold ${isPresentation ? 'px-6 py-4 text-xl' : 'px-4 py-2 text-xs'}`}>1970s: Atypical (2nd Gen - Clozapine)</span><span className={`bg-teal-900/50 text-teal-300 rounded border border-teal-500/50 font-bold ${isPresentation ? 'px-6 py-4 text-xl' : 'px-4 py-2 text-xs'}`}>1990s: Atypical (2nd Gen - Risperidone)</span></div></div></div></Slide>);
      case 3: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Typical Antipsychotics" icon={Pill} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-blue-500 flex flex-col overflow-hidden`}><div className={`flex-grow ${isPresentation ? 'p-12' : 'p-6'}`}><div className={`bg-blue-900/30 rounded border border-blue-500 mb-6 ${isPresentation ? 'p-6' : 'p-4'}`}><strong className={`text-blue-300 uppercase tracking-widest block mb-1 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Definition</strong><p className={`text-white font-bold ${isPresentation ? 'text-2xl' : 'text-base'}`}>First-generation drugs (1950s) that act as Dopamine Antagonists to reduce Positive Symptoms.</p></div><h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Chlorpromazine</h3><p className={`font-bold text-blue-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>First Generation (1950s)</p><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><strong>Dosage:</strong> Max 1000mg daily.<br/><br/><strong>Mechanism:</strong> Dopamine Antagonist. It works by blocking D2 receptors in the synapses of the brain (Mesolimbic pathway), reducing the action of dopamine. This reduces positive symptoms (hallucinations/delusions). <br/><br/><strong>Effect:</strong> Also acts as a sedative (histamine receptors).</p></div></div><div className={`bg-red-900/10 rounded-xl border-l-4 border-red-500 ${isPresentation ? 'p-12' : 'p-6'}`}><strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-2xl' : 'text-xs'}`}>AO3: Evidence</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}><strong>Thornley et al. (2003):</strong> Review of data from 1,121 participants. Found Chlorpromazine was associated with better overall functioning and reduced symptom severity compared to placebo.</p></div></div></Slide>);
      case 4: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Teacher Input" title="Atypical Antipsychotics" icon={Pill} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-10' : 'gap-6'}`}><div className={`bg-gray-800 rounded-xl border border-green-500 flex flex-col overflow-hidden`}><div className={`flex-grow ${isPresentation ? 'p-12' : 'p-6'}`}><div className={`bg-green-900/30 rounded border border-green-500 mb-6 ${isPresentation ? 'p-6' : 'p-4'}`}><strong className={`text-green-300 uppercase tracking-widest block mb-1 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Definition</strong><p className={`text-white font-bold ${isPresentation ? 'text-2xl' : 'text-base'}`}>Second-generation drugs (1970s+) that act on Dopamine, Serotonin, and Glutamate to reduce Positive and Negative Symptoms with fewer side effects.</p></div><h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Clozapine</h3><p className={`font-bold text-green-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Second Generation (1970s)</p><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}><strong>Mechanism:</strong> Binds to Dopamine, Serotonin, and Glutamate receptors. <br/><strong>Benefits:</strong> Reduces depression and anxiety (good for suicide risk). <br/><strong>Risk:</strong> <span className="break-all hyphens-auto">Agranulocytosis</span> (blood condition) - requires regular testing.</p></div></div><div className={`bg-gray-800 rounded-xl border border-teal-500 flex flex-col overflow-hidden`}><div className={`flex-grow ${isPresentation ? 'p-12' : 'p-6'}`}><h3 className={`font-bold text-white mb-2 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Risperidone</h3><p className={`font-bold text-teal-400 uppercase mb-3 ${isPresentation ? 'text-xl' : 'text-xs'}`}>Second Generation (1990s)</p><p className={`text-gray-300 leading-relaxed mb-3 ${isPresentation ? 'text-xl' : 'text-sm'}`}>Developed to be as effective as Clozapine but without the serious side effects. Binds more strongly to Dopamine receptors than Clozapine, so effective in smaller doses.</p></div></div><div className={`col-span-2 bg-red-900/10 rounded-xl border-l-4 border-red-500 ${isPresentation ? 'p-10' : 'p-5'}`}><strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-2xl' : 'text-xs'}`}>AO3: Evidence</strong><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}><strong>Meltzer (2012):</strong> Concluded Clozapine is effective in 30-50% of treatment-resistant cases where typical antipsychotics have failed.</p></div></div></Slide>);
      case 5: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 2: Check" title="Hinge Question" icon={Activity} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full"><p className={`font-serif text-white text-center max-w-3xl mb-12 ${isPresentation ? 'text-6xl leading-tight' : 'text-3xl'}`}>"Why must patients taking Clozapine have regular blood tests?"</p><div className="grid grid-cols-2 gap-8 w-full max-w-3xl"><button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-red-500 hover:bg-red-900/10 transition-all text-left ${isPresentation ? 'p-16' : 'p-8'}`}><span className={`font-bold text-gray-200 block mb-2 ${isPresentation ? 'text-5xl' : 'text-xl'}`}>NMS Risk</span><span className={`block text-gray-500 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Neuroleptic Malignant Syndrome affects temperature, not blood count.</span></button><button className={`bg-gray-800 border-2 border-gray-600 rounded-xl hover:border-green-500 hover:bg-green-900/10 transition-all text-left group ${isPresentation ? 'p-16' : 'p-8'}`}><span className={`font-bold text-gray-200 block mb-2 ${isPresentation ? 'text-5xl' : 'text-xl'}`}>Agranulocytosis</span><span className={`block text-gray-500 mb-2 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Severe reduction in white blood cells leading to infection.</span><span className={`block font-bold opacity-0 group-hover:opacity-100 transition-opacity text-green-400 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>CORRECT</span></button></div></div></Slide>);
      case 6: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice" title="Simulation Briefing" icon={Zap} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full text-center max-w-2xl mx-auto"><div className={`rounded-full mb-8 animate-pulse bg-purple-900/20 ${isPresentation ? 'p-12' : 'p-6'}`}><ShieldAlert size={isPresentation ? 150 : 80} className="text-purple-400" /></div><h3 className={`font-bold text-white mb-6 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>The Synapse Simulator</h3><p className={`text-gray-300 mb-8 leading-relaxed ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Your patient is experiencing severe Hallucinations. You need to intervene at the synaptic level.<br/>Choose the correct mechanism to block the D2 Receptors.</p><button onClick={nextSlide} className={`bg-purple-600 text-white rounded-full font-bold hover:bg-purple-500 transition-all shadow-lg ${isPresentation ? 'px-16 py-8 text-3xl' : 'px-10 py-4 text-lg'}`}>Enter Lab</button></div></Slide>);
      case 7: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice (We Do)" title="Simulation: Antagonist Action" icon={Pill} isPresentation={isPresentation} /><DrugMoleculeSim isPresentation={isPresentation} /></Slide>);
      case 8: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Teacher Input" title="Evaluation: Side Effects" icon={AlertTriangle} isPresentation={isPresentation} /><SideEffectsDeckWrapper isPresentation={isPresentation} /></Slide>);
      case 9: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Independent Practice" title="Essay Planning" icon={Layers} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><div className={`flex items-center gap-3 mb-6 border-b border-gray-600 pb-4`}><span className={`bg-purple-600 text-white font-bold rounded ${isPresentation ? 'px-4 py-2 text-xl' : 'px-3 py-1 text-sm'}`}>16 MARKS</span><h3 className={`font-bold text-gray-200 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Essay Question</h3></div><p className={`text-white font-semibold leading-snug mb-6 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>"Discuss drug therapy for schizophrenia. Refer to Ben in your answer."</p><div className={`bg-black/30 rounded border-l-4 border-purple-500 mb-6 flex-grow ${isPresentation ? 'p-10' : 'p-4'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest ${isPresentation ? 'text-lg' : 'text-xs'}`}>Scenario: Ben</h4><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Ben has been taking Chlorpromazine for 5 years. His hallucinations have stopped, but he now suffers from involuntary facial tics (Tardive Dyskinesia) and severe sleepiness.</p></div></div><EssayPlanRevealL4 isPresentation={isPresentation} /></div></Slide>);
      case 10: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Feedback" title="Official Mark Scheme" icon={Scale} isPresentation={isPresentation} /><div className="h-full overflow-y-auto custom-scrollbar pr-4"><table className="w-full text-left border-collapse border border-gray-700"><thead className="bg-gray-800 text-gray-400 uppercase text-xs sticky top-0"><tr><th className={`border-b border-gray-700 bg-gray-800 ${isPresentation ? 'p-8 text-2xl w-48' : 'p-4 w-32'}`}>Level</th><th className={`border-b border-gray-700 bg-gray-800 w-1/2 ${isPresentation ? 'p-8 text-2xl' : 'p-4'}`}>AO1: Knowledge</th><th className={`border-b border-gray-700 bg-gray-800 w-1/2 ${isPresentation ? 'p-8 text-2xl' : 'p-4'}`}>AO3: Evaluation</th></tr></thead><tbody className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><tr className="border-b border-gray-700 bg-green-900/10"><td className={`align-top text-green-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 4 (13-16)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Detailed knowledge of Typical vs Atypical. Correct mechanism (Antagonist/D2). Accurate names (Chlorpromazine/Clozapine).</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Effective discussion of Side Effects (TD/NMS). Evaluation of effectiveness (Thornley/Meltzer). Ethical discussion (Chemical Cosh). Application to Ben is clear.</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-yellow-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 3 (9-12)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Evident knowledge but less detailed. May not distinguish generations clearly.</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Evaluation present but generic. Link to Ben is weak.</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-orange-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 2 (5-8)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Limited knowledge. Confuses Typical/Atypical. Mechanisms likely absent.</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Basic evaluation (e.g. "Drugs have side effects"). Application to Ben is minimal.</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-red-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 1 (1-4)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Very limited knowledge. Major inaccuracies.</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Evaluation absent or wholly ineffective.</td></tr></tbody></table></div></Slide>);
      case 11: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-12' : 'p-6'}`}><CheckCircle size={isPresentation ? 150 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>Lesson 04 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You have analyzed Typical and Atypical Drug Therapies.</p><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-12' : 'p-6'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest mb-2 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>Next Lesson</h4><div className="flex items-center justify-between"><span className={`font-bold text-white ${isPresentation ? 'text-4xl' : 'text-xl'}`}>05: Psychological Therapies</span><ChevronRight className="text-gray-500" /></div></div></div></Slide>);
      default: return null;
    }
  };
  
  const renderLesson5 = () => {
    switch (currentSlide) {
        case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><Brain size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 05: Psychological Therapies</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
        case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Retrieval" title="Do Now: Recap" icon={Activity} isPresentation={isPresentation} /><DoNowQuiz questions={lesson5DoNow} isPresentation={isPresentation} /></Slide>);
        case 2: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="AO1: Knowledge" title="Cognitive Behavioural Therapy" icon={Brain} isPresentation={isPresentation} /><CBT_Model_View isPresentation={isPresentation} /></Slide>);
        case 3: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="AO2: Application" title="Therapist Simulation" icon={User} isPresentation={isPresentation} /><CBT_TherapistSim isPresentation={isPresentation} /></Slide>);
        case 4: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="AO1: Knowledge" title="Family Therapy" icon={Users} isPresentation={isPresentation} /><PharoahStrategies isPresentation={isPresentation} /></Slide>);
        case 5: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="AO3: Evaluation" title="Essay Planning" icon={FileText} isPresentation={isPresentation} /><EssayPlanRevealL5 isPresentation={isPresentation} /></Slide>);
        case 6: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-12' : 'p-6'}`}><CheckCircle size={isPresentation ? 150 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>Lesson 05 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You have analyzed CBT and Family Therapy.</p><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-12' : 'p-6'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest mb-2 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>Next Lesson</h4><div className="flex items-center justify-between"><button onClick={() => { setCurrentLesson(6); setCurrentSlide(0); }} className={`bg-gray-800 border border-gray-600 rounded text-gray-300 hover:text-white flex items-center gap-2 ${isPresentation ? 'px-10 py-5 text-2xl' : 'px-6 py-3'}`}><span className={`font-bold text-white ${isPresentation ? 'text-4xl' : 'text-xl'}`}>06: Management</span><ChevronRight className="text-gray-500" /></button></div></div></div></Slide>);
        default: return null;
    }
  };

  const renderLesson6 = () => {
    switch (currentSlide) {
        case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><ClipboardList size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 06: Management (Token Economies)</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
        case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Retrieval" title="Do Now: Recap" icon={Activity} isPresentation={isPresentation} /><DoNowQuiz questions={lesson6DoNow} isPresentation={isPresentation} /></Slide>);
        case 2: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="AO2: Application" title="Ward Manager Simulation" icon={ClipboardList} isPresentation={isPresentation} /><WardManagerSim isPresentation={isPresentation} /></Slide>);
        case 3: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="AO2: Application" title="Protocol Challenge" icon={ClipboardList} isPresentation={isPresentation} /><ProtocolDesignChallenge isPresentation={isPresentation} /></Slide>);
        case 4: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-12' : 'p-6'}`}><CheckCircle size={isPresentation ? 150 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>Lesson 06 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You have analyzed Token Economies and Operant Conditioning.</p><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-12' : 'p-6'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest mb-2 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>Next Lesson</h4><div className="flex items-center justify-between"><button onClick={() => { setCurrentLesson(7); setCurrentSlide(0); }} className={`bg-gray-800 border border-gray-600 rounded text-gray-300 hover:text-white flex items-center gap-2 ${isPresentation ? 'px-10 py-5 text-2xl' : 'px-6 py-3'}`}><span className={`font-bold text-white ${isPresentation ? 'text-4xl' : 'text-xl'}`}>07: Interactionist Approach</span><ChevronRight className="text-gray-500" /></button></div></div></div></Slide>);
        default: return null;
    }
  };

  const renderLesson7 = () => {
    switch (currentSlide) {
      case 0: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className="relative mb-8"><div className="absolute inset-0 bg-purple-500 blur-3xl opacity-20 rounded-full"></div><Umbrella size={isPresentation ? 180 : 120} className="text-purple-400 relative z-10" /></div><h1 className={`font-extrabold text-white mb-2 tracking-tight ${isPresentation ? 'text-9xl' : 'text-6xl'}`}>Schizophrenia</h1><div className="h-1 w-32 bg-purple-600 my-6"></div><h2 className={`text-gray-400 font-light tracking-widest uppercase mb-12 ${isPresentation ? 'text-5xl' : 'text-2xl'}`}>Lesson 07: Interactionist Approach</h2><button onClick={nextSlide} className={`group relative bg-gray-800 text-white font-bold rounded-full overflow-hidden border border-purple-500/50 hover:border-purple-400 transition-all ${isPresentation ? 'px-16 py-8 text-4xl' : 'px-8 py-4'}`}><span className="relative z-10 flex items-center gap-2">Lesson Start <ChevronRight className="group-hover:translate-x-1 transition-transform"/></span><div className="absolute inset-0 bg-purple-600/20 translate-y-full group-hover:translate-y-0 transition-transform"></div></button></div></Slide>);
      case 1: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 1: Activation" title="Do Now Task" icon={Clock} time="10 MINS" isPresentation={isPresentation} /><DoNowQuiz questions={lesson7DoNow} isPresentation={isPresentation} /></Slide>);
      
      // DISCUSSION TASK - CHANGED TO CAUSATION DEBATE COMPONENT
      case 2: return (
        <Slide isPresentation={isPresentation}>
          <PhaseHeader phase="Phase 1.5: Discussion" title="The Causation Debate" icon={MessageCircle} time="5 MINS" isPresentation={isPresentation} />
          <CausationDebate isPresentation={isPresentation} />
        </Slide>
      );

      // DIATHESIS-STRESS MODEL
      case 3: return (
        <Slide isPresentation={isPresentation}>
          <PhaseHeader phase="Phase 2: Teacher Input" title="The Diathesis-Stress Model" icon={Umbrella} time="15 MINS" isPresentation={isPresentation} />
          <div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}>
            {/* Original Model */}
            <div className={`bg-gray-800 rounded-xl border border-gray-700 flex flex-col ${isPresentation ? 'p-10' : 'p-8'}`}>
               <h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>1. Original Model (Meehl, 1962)</h3>
               <div className={`space-y-4 text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>
                  <p><strong>Diathesis:</strong> Entirely genetic. The result of a single 'Schizogene'. Without this gene, no amount of stress leads to illness.</p>
                  <p><strong>Stress:</strong> Chronic childhood stress, specifically a <strong>Schizophrenogenic Mother</strong>.</p>
               </div>
            </div>
            {/* Modern Model */}
            <div className={`bg-gray-800 rounded-xl border-t-8 border-purple-500 shadow-xl flex flex-col ${isPresentation ? 'p-10' : 'p-8'}`}>
               <h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>2. Modern Understanding</h3>
               <div className={`space-y-4 text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}>
                  <p><strong>Diathesis:</strong> NOT just one gene. It is <strong>Polygenic</strong>. Also includes <strong>Early Trauma</strong> (which alters brain development, e.g. HPA axis).</p>
                  <p><strong>Stress:</strong> Anything that risks triggering the illness. Can be biological (e.g. <strong>Cannabis</strong> use increases risk 7x) or psychological.</p>
               </div>
            </div>
            {/* AO3 */}
            <div className={`col-span-2 bg-red-900/10 rounded-xl border-l-4 border-red-500 ${isPresentation ? 'p-8' : 'p-6'}`}>
               <strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-2xl' : 'text-xs'}`}>AO3: Evidence (Tienari et al., 2004)</strong>
               <p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}> Studied 19,000 adopted children from Schizophrenic mothers. <br/><strong>Findings:</strong> High Genetic Risk + Poor Parenting = High rates of Schizophrenia. <br/>High Genetic Risk + Good Parenting = Low rates. <br/><strong>Conclusion:</strong> Genetic vulnerability only leads to the disorder if combined with environmental stress.</p>
            </div>
          </div>
        </Slide>
      );

      // TREATMENT & EVALUATION
      case 4: return (
        <Slide isPresentation={isPresentation}>
          <PhaseHeader phase="Phase 2: Teacher Input" title="Interactionist Treatment" icon={Pill} time="10 MINS" isPresentation={isPresentation} />
          <div className={`grid grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}>
             <div className={`bg-gray-800 rounded-xl p-8 border border-gray-700`}>
                 <h3 className={`font-bold text-white mb-4 ${isPresentation ? 'text-4xl' : 'text-2xl'}`}>Combination Therapy</h3>
                 <p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>
                    Because the approach acknowledges both biological and psychological causes, the standard treatment is combining <strong>Antipsychotics</strong> (Bio) with <strong>CBT</strong> (Psych). <br/><br/>
                    <strong>Turkington et al. (2006):</strong> It is possible to believe in biological causes and still use CBT to relieve symptoms.
                 </p>
             </div>
             <div className={`bg-red-900/10 rounded-xl border-l-4 border-red-500 p-8`}>
                 <strong className={`text-red-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-2xl' : 'text-xs'}`}>AO3: Effectiveness (Tarrier et al., 2004)</strong>
                 <p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>
                    315 patients randomly allocated to: <br/>1. Meds + CBT <br/>2. Meds + Counselling <br/>3. Meds Only (Control).<br/><br/>
                    <strong>Findings:</strong> Patients in combination groups showed lower symptom levels than the control group. Shows clear practical advantage.
                 </p>
             </div>
             <div className={`col-span-2 bg-orange-900/10 rounded-xl border-l-4 border-orange-500 p-8`}>
                 <strong className={`text-orange-300 block mb-2 uppercase tracking-widest ${isPresentation ? 'text-2xl' : 'text-xs'}`}>AO3: Treatment-Causation Fallacy</strong>
                 <p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>
                    Just because combined treatments work, it doesn't necessarily mean the interactionist <em>explanation</em> is correct. (e.g. Alcohol reduces shyness, but lack of alcohol doesn't cause shyness).
                 </p>
             </div>
          </div>
        </Slide>
      );

      // SIMULATION BRIEFING
      case 5: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice" title="Simulation Briefing" icon={Thermometer} isPresentation={isPresentation} /><div className="flex flex-col items-center justify-center h-full text-center max-w-2xl mx-auto"><div className={`rounded-full mb-8 animate-pulse bg-purple-900/20 ${isPresentation ? 'p-12' : 'p-6'}`}><Umbrella size={isPresentation ? 150 : 80} className="text-purple-400" /></div><h3 className={`font-bold text-white mb-6 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>The Vulnerability Bucket</h3><p className={`text-gray-300 mb-8 leading-relaxed ${isPresentation ? 'text-4xl' : 'text-xl'}`}>A visual metaphor for the Diathesis-Stress Model.<br/>Balance the patient's genetic risk (Water Level) with environmental stressors (Inflow) and Treatment (Outflow) to prevent overflow (Psychosis).</p><button onClick={nextSlide} className={`bg-purple-600 text-white rounded-full font-bold hover:bg-purple-500 transition-all shadow-lg ${isPresentation ? 'px-16 py-8 text-3xl' : 'px-10 py-4 text-lg'}`}>Start Simulation</button></div></Slide>);

      // SIMULATION
      case 6: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 3: Guided Practice (We Do)" title="Simulation: Stress Management" icon={CloudRain} isPresentation={isPresentation} /><StressBucketSim isPresentation={isPresentation} /></Slide>);

      // ESSAY PLANNING
      case 7: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Independent Practice" title="Essay Planning" icon={Layers} time="15 MINS" isPresentation={isPresentation} /><div className={`grid grid-cols-1 lg:grid-cols-2 h-full ${isPresentation ? 'gap-12' : 'gap-8'}`}><div className={`bg-gray-800 rounded-xl border border-gray-700 shadow-xl flex flex-col ${isPresentation ? 'p-12' : 'p-8'}`}><div className={`flex items-center gap-3 mb-6 border-b border-gray-600 pb-4`}><span className={`bg-orange-600 text-white font-bold rounded ${isPresentation ? 'px-4 py-2 text-xl' : 'px-3 py-1 text-sm'}`}>8 MARKS</span><h3 className={`font-bold text-gray-200 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>Exam Question</h3></div><p className={`text-white font-semibold leading-snug mb-6 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>"Explain how the interactionist approach would explain Jack's condition."</p><div className={`bg-black/30 rounded border-l-4 border-purple-500 mb-6 flex-grow ${isPresentation ? 'p-10' : 'p-4'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest ${isPresentation ? 'text-lg' : 'text-xs'}`}>Scenario: Jack</h4><p className={`text-gray-300 leading-relaxed ${isPresentation ? 'text-2xl' : 'text-sm'}`}>Jack has a family history of schizophrenia. He has started university, is smoking cannabis, and is struggling with the coursework stress.</p></div></div><EssayPlanRevealL7 isPresentation={isPresentation} /></div></Slide>);

      // MARK SCHEME
      case 8: return (<Slide isPresentation={isPresentation}><PhaseHeader phase="Phase 4: Feedback" title="Official Mark Scheme" icon={Scale} isPresentation={isPresentation} /><div className="h-full overflow-y-auto custom-scrollbar pr-4"><table className="w-full text-left border-collapse border border-gray-700"><thead className="bg-gray-800 text-gray-400 uppercase text-xs sticky top-0"><tr><th className={`border-b border-gray-700 bg-gray-800 ${isPresentation ? 'p-8 text-2xl w-48' : 'p-4 w-32'}`}>Level</th><th className={`border-b border-gray-700 bg-gray-800 w-1/2 ${isPresentation ? 'p-8 text-2xl' : 'p-4'}`}>Content</th></tr></thead><tbody className={`text-gray-300 ${isPresentation ? 'text-2xl' : 'text-sm'}`}><tr className="border-b border-gray-700 bg-green-900/10"><td className={`align-top text-green-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 4 (7-8)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Detailed explanation of Diathesis (Genetic vulnerability) and Stress (Trigger). Explicit application to Jack: Family history = Diathesis, Cannabis/Uni = Stress. Use of terminology (Interactionism/Threshold).</td></tr><tr className="border-b border-gray-700"><td className={`align-top text-yellow-400 font-bold ${isPresentation ? 'p-8' : 'p-4'}`}>Level 3 (5-6)</td><td className={isPresentation ? 'p-8 leading-relaxed' : 'p-4'}>Explanation is clear but less detailed. Application to Jack is present but may lack specific terminology (e.g. failing to link cannabis to biological stress).</td></tr></tbody></table></div></Slide>);

      case 9: return (<Slide isPresentation={isPresentation}><div className="flex flex-col items-center justify-center h-full text-center"><div className={`bg-green-500/20 rounded-full mb-8 ${isPresentation ? 'p-12' : 'p-6'}`}><CheckCircle size={isPresentation ? 150 : 80} className="text-green-500" /></div><h2 className={`font-bold text-white mb-4 ${isPresentation ? 'text-7xl' : 'text-4xl'}`}>Lesson 07 Complete</h2><p className={`text-gray-400 mb-8 ${isPresentation ? 'text-4xl' : 'text-xl'}`}>You have completed the Interactionist Approach.</p><div className={`bg-gray-800 rounded-xl border border-gray-700 ${isPresentation ? 'p-12' : 'p-6'}`}><h4 className={`text-purple-400 font-bold uppercase tracking-widest mb-2 ${isPresentation ? 'text-2xl' : 'text-xs'}`}>Next Module</h4><div className="flex items-center justify-between"><span className={`font-bold text-white ${isPresentation ? 'text-4xl' : 'text-xl'}`}>08: Review & Synthesis</span><ChevronRight className="text-gray-500" /></div></div></div></Slide>);
      default: return null;
    }
  };

  return (
    <div className="flex h-screen bg-gray-900 text-gray-100 font-sans overflow-hidden selection:bg-purple-500 selection:text-white">
      {/* Sidebar */}
      <div className={`${isSidebarOpen ? 'w-80' : 'w-0'} bg-gray-950 border-r border-gray-800 transition-all duration-300 flex flex-col z-20 shadow-2xl relative overflow-hidden`}><div className="p-6 border-b border-gray-800 flex justify-between items-center"><span className="font-black text-xl text-purple-500 tracking-tighter">SCHIZO<span className="text-white">PHRENIA</span></span><button onClick={() => setSidebarOpen(false)} className="text-gray-400 hover:text-white"><X size={20}/></button></div><div className="flex-grow overflow-y-auto py-4">{lessons.map((lesson) => (<button key={lesson.id} onClick={() => { setCurrentLesson(lesson.id); setCurrentSlide(0); }} className={`w-full text-left px-6 py-4 border-l-4 transition-all ${currentLesson === lesson.id ? 'border-purple-500 bg-purple-900/10 text-white shadow-[inset_10px_0_20px_-10px_rgba(168,85,247,0.2)]' : 'border-transparent text-gray-500 hover:bg-gray-900 hover:text-gray-300'} ${!lesson.active ? 'opacity-40 cursor-not-allowed' : ''}`}><div className="flex items-center justify-between"><span className="font-bold text-sm tracking-tight">{lesson.title}</span>{currentLesson === lesson.id && <div className="w-2 h-2 rounded-full bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,1)]"></div>}{lesson.complete && currentLesson !== lesson.id && <CheckCircle size={14} className="text-green-500"/>}</div></button>))}</div></div>
      <div className="flex-grow flex flex-col h-full relative bg-[#0a0a0a]">
        <div className="absolute top-4 left-4 z-50 flex gap-2">{!isSidebarOpen && <button onClick={() => setSidebarOpen(true)} className="bg-gray-800 p-2 rounded text-white hover:bg-gray-700 shadow-lg border border-gray-700"><Menu size={20} /></button>}</div>
        <div className="absolute top-4 right-4 z-50 flex gap-2"><button onClick={togglePresentation} className={`p-2 rounded-full text-gray-400 hover:text-white hover:bg-gray-700 border border-gray-700/50 backdrop-blur-sm transition-all ${isPresentation ? 'bg-purple-600 text-white border-purple-500 shadow-[0_0_15px_rgba(168,85,247,0.5)]' : 'bg-gray-800/80'}`} title="Presentation Mode"><Projector size={20} /></button><button onClick={() => setSidebarOpen(!isSidebarOpen)} className="bg-gray-800/80 p-2 rounded-full text-gray-400 hover:text-white hover:bg-gray-700 border border-gray-700/50 backdrop-blur-sm transition-all" title={isSidebarOpen ? "Maximize Content" : "Show Sidebar"}>{isSidebarOpen ? <Maximize2 size={20} /> : <Minimize2 size={20} />}</button></div>
        <div className="h-1 bg-gray-900 w-full"><div className="h-full bg-gradient-to-r from-purple-800 to-purple-500 transition-all duration-500 shadow-[0_0_15px_rgba(168,85,247,0.5)]" style={{ width: `${((currentSlide + 1) / slideCount) * 100}%` }} /></div>
        <main className="flex-grow relative overflow-hidden bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-gray-900 via-[#050505] to-black">{currentLesson === 1 ? renderLesson1() : currentLesson === 2 ? renderLesson2() : currentLesson === 3 ? renderLesson3() : currentLesson === 4 ? renderLesson4() : currentLesson === 5 ? renderLesson5() : currentLesson === 6 ? renderLesson6() : currentLesson === 7 ? renderLesson7() : currentLesson === 8 ? <ExamSimulator isPresentation={isPresentation} /> : null}</main>
        {currentLesson !== 8 && <div className="h-20 border-t border-gray-800 bg-black/50 backdrop-blur-sm flex items-center justify-between px-8 z-10"><button onClick={prevSlide} disabled={currentSlide === 0} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-bold text-sm transition-all ${currentSlide === 0 ? 'text-gray-700 cursor-not-allowed' : 'text-gray-400 hover:text-white hover:bg-gray-800'}`}><ChevronLeft size={16} /> PREV</button><span className="text-gray-600 font-mono text-xs tracking-widest">{currentSlide + 1} / {slideCount}</span><button onClick={nextSlide} disabled={currentSlide === slideCount - 1} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-bold text-sm transition-all ${currentSlide === slideCount - 1 ? 'text-gray-700 cursor-not-allowed' : 'bg-purple-600 text-white hover:bg-purple-500 shadow-lg hover:shadow-purple-500/20'}`}>NEXT <ChevronRight size={16} /></button></div>}
      </div>
    </div>
  );
}